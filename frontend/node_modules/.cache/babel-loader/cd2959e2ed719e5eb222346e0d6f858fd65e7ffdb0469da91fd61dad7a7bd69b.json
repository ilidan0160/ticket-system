{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchUser } from '../../features/auth/authSlice';\nconst AppInitializer = () => {\n  _s();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // Load user data when the app starts if a token exists\n    const token = localStorage.getItem('token');\n    if (token) {\n      dispatch(fetchUser()).unwrap().catch(error => {\n        console.error('Failed to load user data:', error);\n        // Clear invalid token if any\n        localStorage.removeItem('token');\n      });\n    }\n  }, [dispatch]);\n  return null; // This component doesn't render anything\n};\n_s(AppInitializer, \"rAh3tY+Iv6hWC9AI4Dm+rCbkwNE=\", false, function () {\n  return [useDispatch];\n});\n_c = AppInitializer;\nexport default AppInitializer;\nvar _c;\n$RefreshReg$(_c, \"AppInitializer\");","map":{"version":3,"names":["useEffect","useDispatch","fetchUser","AppInitializer","_s","dispatch","token","localStorage","getItem","unwrap","catch","error","console","removeItem","_c","$RefreshReg$"],"sources":["/home/anthony/Escritorio/ticket-system/frontend/src/components/auth/AppInitializer.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { AppDispatch } from '../../app/store';\nimport { fetchUser } from '../../features/auth/authSlice';\n\nconst AppInitializer = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  useEffect(() => {\n    // Load user data when the app starts if a token exists\n    const token = localStorage.getItem('token');\n    if (token) {\n      dispatch(fetchUser())\n        .unwrap()\n        .catch((error: unknown) => {\n          console.error('Failed to load user data:', error);\n          // Clear invalid token if any\n          localStorage.removeItem('token');\n        });\n    }\n  }, [dispatch]);\n\n  return null; // This component doesn't render anything\n};\n\nexport default AppInitializer;\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,aAAa;AAEzC,SAASC,SAAS,QAAQ,+BAA+B;AAEzD,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAMC,QAAQ,GAAGJ,WAAW,CAAc,CAAC;EAE3CD,SAAS,CAAC,MAAM;IACd;IACA,MAAMM,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACTD,QAAQ,CAACH,SAAS,CAAC,CAAC,CAAC,CAClBO,MAAM,CAAC,CAAC,CACRC,KAAK,CAAEC,KAAc,IAAK;QACzBC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjD;QACAJ,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;MAClC,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAACR,QAAQ,CAAC,CAAC;EAEd,OAAO,IAAI,CAAC,CAAC;AACf,CAAC;AAACD,EAAA,CAlBID,cAAc;EAAA,QACDF,WAAW;AAAA;AAAAa,EAAA,GADxBX,cAAc;AAoBpB,eAAeA,cAAc;AAAC,IAAAW,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}